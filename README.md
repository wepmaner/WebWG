# WebWG ‚Äî REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è WireGuard VPN

**WebWG** ‚Äî —ç—Ç–æ –ª—ë–≥–∫–∏–π –∏ —É–¥–æ–±–Ω—ã–π REST API-—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN‚Äë—Å–µ—Ä–≤–µ—Ä–æ–º –Ω–∞ –±–∞–∑–µ WireGuard. –°–µ—Ä–≤–∏—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥ –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ä‚Äë—É–∑–ª–∞–º–∏: —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ  
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (`.conf`)  
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è ¬´–≥–æ—Ä—è—á–∞—è¬ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (`wg syncconf`)  
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (—á–µ—Ä–µ–∑ `wg show`)  
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR‚Äë–∫–æ–¥–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤  
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.10+**  
- **FastAPI** ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ REST API  
- **Uvicorn** ‚Äî ASGI‚Äë—Å–µ—Ä–≤–µ—Ä  
- **subprocess** ‚Äî –≤—ã–∑–æ–≤ –∫–æ–º–∞–Ω–¥ `wg`, `wg-quick`, `systemctl`  
- **qrcode** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è QR‚Äë–∫–æ–¥–æ–≤  
- **HTML/CSS/JavaScript** ‚Äî –ª—ë–≥–∫–∏–π –≤–µ–±‚Äë—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥  
- **JSON** ‚Äî —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (`peers.json`)  
- **systemd** ‚Äî –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `webwg/`
  - `main.py`                 ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
  - `wg.py`                   ‚Äî –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å WireGuard
  - `schemas.py`              ‚Äî Pydantic‚Äë–º–æ–¥–µ–ª–∏
  - `peers.json`              ‚Äî JSON‚Äë—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
  - `users/`                  ‚Äî –ø–∞–ø–∫–∞ —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ `.conf`‚Äë—Ñ–∞–π–ª–∞–º–∏
  - `static/`                 ‚Äî —Å—Ç–∞—Ç–∏–∫–∞ (QR‚Äë–∫–æ–¥—ã –∏ —Ç.–¥.)
  - `templates/`              ‚Äî —à–∞–±–ª–æ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π WireGuard
  - `webwg.service`           ‚Äî unit‚Äë—Ñ–∞–π–ª systemd
  - `requirements.txt`        ‚Äî —Å–ø–∏—Å–æ–∫ Python‚Äë–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - `README.md`               ‚Äî —ç—Ç–æ—Ç —Ñ–∞–π–ª

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
git clone https://github.com/wepmaner/webwg.git
cd webwg
```
2. –°–æ–∑–¥–∞—Ç—å –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
python3 -m venv .venv
source .venv/bin/activate
```
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install --upgrade pip
pip install -r requirements.txt
```
4. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ WireGuard (/etc/wireguard/wg0.conf) –∏ JSON‚Äë—Ö—Ä–∞–Ω–∏–ª–∏—â–µ (peers.json).
5. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
uvicorn main:app --host 0.0.0.0 --port 8000
```
6. –î–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ —Å–æ–∑–¥–∞—Ç—å unit‚Äë—Ñ–∞–π–ª webwg.service –∏ –≤–∫–ª—é—á–∏—Ç—å –µ–≥–æ:
```
sudo cp webwg.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable --now webwg.service
```
## ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

- POST /api/users ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø–∏—Ä–∞
- GET /api/users ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∏—Ä–æ–≤
- PUT /api/users/{username} ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∏—Ä–∞
- DELETE /api/users/{username} ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–∏—Ä–∞
- GET /api/getInfo ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ VPN
- GET /api/users/{username}/qrcode ‚Äî –ø–æ–ª—É—á–∏—Ç—å QR‚Äë–∫–æ–¥

(–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º Swagger UI: http://<host>:8000/docs)
